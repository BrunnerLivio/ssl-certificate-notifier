<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

### Table of Contents

-   [getServerUrl](#getserverurl)
-   [updateEachCertificate](#updateeachcertificate)
-   [Certificate](#certificate)
-   [Certificate](#certificate-1)
-   [Certificate](#certificate-2)
-   [Certificate](#certificate-3)
-   [Bot](#bot)
    -   [$onInit](#oninit)
    -   [run](#run)
-   [Sally](#sally)
    -   [$onInit](#oninit-1)
    -   [sendReminders](#sendreminders)
    -   [list](#list)
    -   [send](#send)
-   [CertificateController](#certificatecontroller)
    -   [\_addCertificate](#_addcertificate)
    -   [run](#run-1)
    -   [all](#all)
    -   [delete](#delete)
    -   [add](#add)
    -   [getICS](#getics)
-   [CertificateRepository](#certificaterepository)
    -   [\_dateToDatabaseDate](#_datetodatabasedate)
    -   [all](#all-1)
    -   [getCertificateByUrl](#getcertificatebyurl)
    -   [update](#update)
    -   [remove](#remove)
    -   [addOrUpdate](#addorupdate)
-   [CommandsController](#commandscontroller)
    -   [\_parseHostname](#_parsehostname)
    -   [remove](#remove-1)
    -   [run](#run-2)
    -   [list](#list-1)
    -   [add](#add-1)
-   [Database](#database)
    -   [run](#run-3)
-   [getICSByCertificate](#geticsbycertificate)
-   [Reminder](#reminder)
-   [REMINDER_TYPES](#reminder_types)
    -   [FRIENDLY](#friendly)
    -   [UNFRIENDLY](#unfriendly)
-   [Server](#server)
    -   [start](#start)
-   [Controller](#controller)
-   [SlackController](#slackcontroller)
    -   [\_getChalkedMethod](#_getchalkedmethod)
    -   [\_logOperation](#_logoperation)
    -   [\_logError](#_logerror)
    -   [post](#post)
    -   [get](#get)
-   [SlackController](#slackcontroller-1)
    -   [\_getChalkedMethod](#_getchalkedmethod-1)
    -   [\_logOperation](#_logoperation-1)
    -   [\_logError](#_logerror-1)
    -   [post](#post-1)
    -   [get](#get-1)

## getServerUrl

Returns the server url, depending on the NODE_ENV environment variable

Returns **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** The server url

## updateEachCertificate

Updates each certificate from the given lists 
in the Web API.

**Parameters**

-   `err` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** Error
-   `results` **[Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array)&lt;[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)>** List of certificates

## Certificate

Checks the expiration date of the given certificate

Type: [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)

**Parameters**

-   `certificate` **[Certificate](#certificate)** The certificate to check the expiry date

**Properties**

-   `url` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** The url of the certificate
-   `expires` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** The expiry date of the certificate
-   `status` **[Number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)** The status of the certificate

Returns **[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)** Promise with the certificate

## Certificate

Sends a reminder of the given certificate

Type: [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)

**Parameters**

-   `reminder` **[Reminder](#reminder)** The reminder object which holds the information when it expires
-   `certificate` **[Certificate](#certificate)** The certificate which the reminder should be sent

**Properties**

-   `type` **[Number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)** The type of the reminder; either FRIENDLY (0) or UNFRIENDLY (1)
-   `daysLeft` **[Number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)** How many days are left until the given date occurs
-   `url` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** The url of the certificate
-   `expires` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** The expiry date of the certificate
-   `status` **[Number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)** The status of the certificate

## Certificate

Adds the given certificate to the database

Type: [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)

**Parameters**

-   `certificate` **[Certificate](#certificate)** The certificate to add to the database

**Properties**

-   `url` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** The url of the certificate
-   `expires` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)?** The expiry date of the certificate
-   `status` **[Number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)?** The status of the certificate

Returns **[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)** Promise with the result object of POSTGRES

## Certificate

Returns the most important informations about the given certificate 
as string.

Type: [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)

**Parameters**

-   `certificate` **[Certificate](#certificate)** The certificate to display as string

**Properties**

-   `expires` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)?** The expiry date of the certificate
-   `url` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** The url of the certificate
-   `status` **[Number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)?** The status of the certificate

Returns **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** The given certificate displayed as text with "Download ICS"-link.

## Bot

Interface for a Slack Bot

**Parameters**

-   `token`  
-   `name`  

### $onInit

Initializes the Bot

### run

Runs the bot. Calls '$onInit' on this bot.

Returns **[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)** Gets reolved when the bot started running.

## Sally

**Extends Bot**

Controls the Slack Bot named "Sally"

### $onInit

Initializes the bot. Sends reminders, if possible.

### sendReminders

Sends reminders to all possible certificates

### list

Returns a list of certificates

Returns **[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)** Promise with the result object of POSTGRES

### send

Sends a message as Sally bot to all configured channels in app.config.json. Either angry message or not angry message. 
The icon changes depending if Sally is angry or not. The icons can be configured
in the app.config.json

**Parameters**

-   `message` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** The message to send
-   `angry` **[Boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean)** If Sally is angry (optional, default `false`)

## CertificateController

**Extends Controller**

The controller is an interface for the checker-application and for
3rd party applications. This controller is mainly for certificate operations

### \_addCertificate

Adds or updates the given certificate and returns a url status.

**Parameters**

-   `certificate` **[Certificate](#certificate)** The certificate to add or update in the DB
-   `res` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** The result object of ExpressJS

### run

Initializes the controller

### all

Lists all certificates

**Parameters**

-   `req` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** The request object of ExpressJS
-   `res` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** The result object of ExpressJS

### delete

Removes the certificate with the given url

**Parameters**

-   `req` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** The request object of ExpressJS
-   `res` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** The result object of ExpressJS

### add

Adds or updates the certificate with the given url.
Checks the expiry date.

**Parameters**

-   `req` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** The request object of ExpressJS
-   `res` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** The result object of ExpressJS

### getICS

Returns a ICS download link from the given certificate url.

**Parameters**

-   `req` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** The request object of ExpressJS
-   `res` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** The result object of ExpressJS

## CertificateRepository

This repository is for certificate operations.

### \_dateToDatabaseDate

Formats the given date to a database-readable string

**Parameters**

-   `date` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** The date which should get formatted

Returns **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** The database-ready formatted date

### all

Returns all certificates from the database

Returns **[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)** Promise with the result object of POSTGRES

### getCertificateByUrl

Returns the certificate with the given url from the database

**Parameters**

-   `url`  

Returns **[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)** Promise with the result object of POSTGRES

### update

Updates the certificate with the given id

**Parameters**

-   `id` **[Number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)** The id of the certificate to update
-   `certificate` **[Certificate](#certificate)** The certificate to add to the database

Returns **[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)** Promise with the result object of POSTGRES

### remove

Removes the certificate with the given url

**Parameters**

-   `url` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** The url of the certificate to remove from the database

Returns **[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)** Promise with the result object of POSTGRES

### addOrUpdate

Adds the given certificate, if the given url is not available yet.
Otherwise it updates it

**Parameters**

-   `certificate` **[Certificate](#certificate)** The certificate to add or update

Returns **[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)** Promise with the result object of POSTGRES

## CommandsController

**Extends SlackController**

The controller for the Slack Bot. This controllers method should always return
plain text, because the Slack Bot prints the output.

### \_parseHostname

Parses the hostname of the given url

**Parameters**

-   `rawUrl` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** The url which should get parsed

**Examples**

```javascript
this._parseHostname('https://www.google.com'); // google.com
this._parseHostname('https://google.com'); // google.com
this._parseHostname('google.com'); // google.com
```

### remove

Removes the given url from the database

**Parameters**

-   `rawUrl` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** The URL to remove
-   `res` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** The result object of ExpressJS

### run

Initializes the controller

### list

Lists all certificates with their expiry date and the ICS download link

**Parameters**

-   `req` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** The request object of ExpressJS
-   `res` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** The result object of ExpressJS

### add

Adds the given url to the database

**Parameters**

-   `req` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** The request object of ExpressJS
-   `res` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** The result object of ExpressJS

Returns **[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)** Promise of the operation

## Database

The adapter for the POSTGRES database connection

### run

Start the database client

Returns **[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)** If it is finished connection or not.

## getICSByCertificate

Generates an ICS string

**Parameters**

-   `certificate` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** The certificate from the database to generate the ICS string from
    -   `certificate.url` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** The certificate url
    -   `certificate.expires` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** The certificate expiry date

Returns **[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)** Returns the promise of the ICS event

## Reminder

Returns if it should remind the given date.
The reminder dates are configured in the app.config.json

Type: [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)

**Parameters**

-   `date` **[Date](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date)** The date of which the final date is.

**Properties**

-   `type` **[Number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)** The type of the reminder; either FRIENDLY (0) or UNFRIENDLY (1)
-   `daysLeft` **[Number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)** How many days are left until the given date occurs

Returns **[Reminder](#reminder)** The reminder object which inclus when and how the reminder is

## REMINDER_TYPES

The types of reminder. Either FRIENDLY (0) or UNFRIENDLY (1)

### FRIENDLY

A friendly reminder type

### UNFRIENDLY

An unfriendly reminder type

## Server

Represents the Slack Web Server

### start

Runs the ExpressJS server

Returns **[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)** The promise when the server started

## Controller

Represent an ExpressJS controller

**Parameters**

-   `app`  

## SlackController

**Extends Controller**

### \_getChalkedMethod

Returns the given HTTP-method in color

**Parameters**

-   `method` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** The method to colorize

Returns **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** The given HTTP-method in color using chalk

### \_logOperation

Logs the operations

**Parameters**

-   `operation` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** The URL operation
-   `req` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** The request object from ExpressJS
-   `method` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** The HTTP-Method

**Examples**

```javascript
this._logOperation('/api/command/add', req, 'POST');
```

### \_logError

Logs the error

**Parameters**

-   `operation` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** The URL operation
-   `method` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** The HTTP-Method
-   `err` **[Error](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error)** The error object
-   `req` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** The request object from ExpressJS

**Examples**

```javascript
this._logError('/api/command/add', 'POST', err, req);
```

### post

Adds a POST-route

**Parameters**

-   `url` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** The url of the route
-   `callback` **function ([Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object), [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)): [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)** The callback

**Examples**

```javascript
this.post(`/api/command/list`, (req, res) => this.list(req, res));
```

### get

Adds a GET-route

**Parameters**

-   `url` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** The url of the route
-   `callback` **[Function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function)** The callback

**Examples**

```javascript
this.get(`/api/command/list`, (req, res) => this.list(req, res));
```

## SlackController

**Extends Controller**

Represent an ExpressJS controller for Slack

### \_getChalkedMethod

Returns the given HTTP-method in color

**Parameters**

-   `method` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** The method to colorize

Returns **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** The given HTTP-method in color using chalk

### \_logOperation

Logs the operations

**Parameters**

-   `operation` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** The URL operation
-   `req` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** The request object from ExpressJS
-   `method` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** The HTTP-Method

**Examples**

```javascript
this._logOperation('/api/command/add', req, 'POST');
```

### \_logError

Logs the error

**Parameters**

-   `operation` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** The URL operation
-   `method` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** The HTTP-Method
-   `err` **[Error](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error)** The error object
-   `req` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** The request object from ExpressJS

**Examples**

```javascript
this._logError('/api/command/add', 'POST', err, req);
```

### post

Adds a POST-route

**Parameters**

-   `url` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** The url of the route
-   `callback` **function ([Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object), [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)): [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)** The callback

**Examples**

```javascript
this.post(`/api/command/list`, (req, res) => this.list(req, res));
```

### get

Adds a GET-route

**Parameters**

-   `url` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** The url of the route
-   `callback` **[Function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function)** The callback

**Examples**

```javascript
this.get(`/api/command/list`, (req, res) => this.list(req, res));
```
